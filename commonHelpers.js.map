{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/js/izi-toast-options.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '42782608-9283e0435a58714aa19763cda';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport function getPhotos(q, page) {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page,\n    per_page: 20,\n  });\n  const url = `${BASE_URL}/?${params}`;\n\n  return fetch(url).then(res => {\n    if (!res.ok) {\n      throw new Error(res.status);\n    }\n    return res.json();\n  });\n}\n","export function createMarkup(arr) {\n  return arr\n    .map(arr => {\n      const {\n        webformatURL,\n        tags,\n        largeImageURL,\n        likes,\n        views,\n        comments,\n        downloads,\n      } = arr;\n      return ` <li class=\"gallery-item\" data-tilt> \n              <a class=\"gallery-link\" href=\"${largeImageURL}\">\n              <img  \n                class=\"gallery-image\"\n                src=\"${webformatURL}\"\n                alt=\"${tags}\"\n              />\n            </a>\n              <ul class=\"property-list\">\n    <li class=\"list-property-item\"><strong>Likes</strong> <br> ${likes}</li>\n    <li class=\"list-property-item\"><strong>Views</strong> <br> ${views}</li>\n    <li class=\"list-property-item\"><strong>Comments</strong> <br> ${comments}</li>\n    <li class=\"list-property-item\"><strong>Downloads</strong> <br> ${downloads}</li>\n  </ul>\n          </li>`;\n    })\n    .join('');\n}\n","const errorMsg = {\n  message:\n    'Sorry, there are no images matching  your search query. Please, try again!',\n  messageSize: '16',\n  messageLineHeight: '24',\n  iconUrl: './img/error.svg',\n  backgroundColor: 'rgb(239, 64, 64)',\n  messageColor: 'rgb(255, 255, 255)',\n  titleColor: 'rgb(255, 255, 255)',\n  position: 'topRight',\n  close: 'rgb(255, 255, 255)',\n  maxWidth: '432px',\n};\n\nconst okMsg = {\n  // title: 'Ok',\n  iconUrl: './img/ok.svg',\n  backgroundColor: 'rgb(89, 161, 13)',\n  messageColor: 'rgb(255, 255, 255)',\n  titleColor: 'rgb(255, 255, 255)',\n  position: 'topRight',\n  close: 'rgb(255, 255, 255)',\n  messageSize: '16',\n  messageLineHeight: '24',\n};\n\nconst warningMsg = {\n  // title: 'Caution',\n  message: 'You forgot to enter a search query',\n  iconUrl: './img/warning.svg',\n  backgroundColor: 'rgb(255, 160, 0)',\n  messageColor: 'rgb(255, 255, 255)',\n  titleColor: 'rgb(255, 255, 255)',\n  position: 'topRight',\n  close: 'rgb(255, 255, 255)',\n  messageSize: '16',\n  messageLineHeight: '24',\n};\n\nconst hello = {\n  // title: 'Hello',\n  message: 'Welcome! Please enter your search query!',\n\n  iconUrl: './img/bell.svg',\n  backgroundColor: 'rgb(0, 153, 255)',\n  messageColor: 'rgb(255, 255, 255)',\n  titleColor: 'rgb(255, 255, 255)',\n  position: 'topRight',\n  close: 'rgb(255, 255, 255)',\n  messageSize: '16',\n  messageLineHeight: '24',\n};\n\nexport { errorMsg, okMsg, warningMsg, hello };\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport VanillaTilt from 'vanilla-tilt';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getPhotos } from './js/pixabay-api';\nimport { createMarkup } from './js/render-functions';\nimport { errorMsg, okMsg, warningMsg, hello } from './js/izi-toast-options';\n\nconst searchForm = document.querySelector('.js-search-form');\nconst input = searchForm.querySelector('.js-input');\nconst loader = document.querySelector('.js-loader');\nconst gallery = document.querySelector('.js-gallery');\n\nlet searchQ;\nlet pages = 1;\n\nsearchForm.addEventListener('submit', onFormSubmit);\n\nfunction onFormSubmit(e) {\n  e.preventDefault();\n\n  loader.classList.remove('is-hidden');\n  gallery.innerHTML = '';\n\n  searchQ = e.currentTarget.elements['user-search-q'].value.trim();\n\n  if (!searchQ) return searchEmptyWarning();\n\n  getPhotos(searchQ, pages)\n    .then(res => {\n      if (res.hits.length === 0) return searchFinishedError();\n      searchFinishedOk(res.total);\n\n      gallery.innerHTML = createMarkup(res.hits);\n\n      let galleryList = new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n      galleryList.refresh();\n\n      VanillaTilt.init(document.querySelectorAll('.gallery-item'), {\n        max: 25,\n        speed: 400,\n      });\n    })\n    .catch(console.log);\n\n  e.currentTarget.reset();\n}\n\ninput.addEventListener('focus', () => {\n  input.removeAttribute('placeholder');\n});\ninput.addEventListener('blur', () => {\n  input.setAttribute('placeholder', 'Search images...');\n});\n\niziToast.info(hello);\n\nfunction searchEmptyWarning() {\n  loader.classList.add('is-hidden');\n  iziToast.warning(warningMsg);\n}\n\nfunction searchFinishedError() {\n  loader.classList.add('is-hidden');\n  iziToast.error(errorMsg);\n}\n\nfunction searchFinishedOk(total) {\n  loader.classList.add('is-hidden');\n  okMsg.message = `We found ${total} photos`;\n  iziToast.success(okMsg);\n}\n\n//     ulEl.innerHTML = createMarkup(res.results);\n//     if (res.total < perPage) {\n//       loadMoreBtnHide();\n//     } else {\n//       loadMoreBtnShow();\n//     }\n//   })\n//   .catch(console.log)\n//   .finally(() => spinnerStop());\n\n// e.currentTarget.reset();\n\nfunction imgLoaded(img) {\n  var imgWrapper = img.parentNode;\n\n  imgWrapper.className += imgWrapper.className ? ' loaded' : 'loaded';\n}\n"],"names":["API_KEY","BASE_URL","getPhotos","q","page","params","url","res","createMarkup","arr","webformatURL","tags","largeImageURL","likes","views","comments","downloads","errorMsg","okMsg","warningMsg","hello","searchForm","input","loader","gallery","searchQ","pages","onFormSubmit","e","searchEmptyWarning","searchFinishedError","searchFinishedOk","SimpleLightbox","VanillaTilt","iziToast","total"],"mappings":"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"}