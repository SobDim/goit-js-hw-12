{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/js/izi-toast-options.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nconst API_KEY = '42782608-9283e0435a58714aa19763cda';\n\nexport async function getPhotos(q, page, perPage) {\n  const { data } = await axios.get('', {\n    params: {\n      key: API_KEY,\n      q,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: perPage,\n    },\n  });\n  return data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport VanillaTilt from 'vanilla-tilt';\nimport lazySizes from 'lazysizes';\n\nlet galleryList = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport const gallery = document.querySelector('.js-gallery');\n\nexport function renderPage(arr) {\n  gallery.insertAdjacentHTML('beforeend', createMarkup(arr));\n\n  galleryList.refresh();\n\n  VanillaTilt.init(document.querySelectorAll('.gallery-item'), {\n    max: 25,\n    speed: 400,\n  });\n}\n\nfunction createMarkup(arr) {\n  return arr\n    .map(arr => {\n      const {\n        webformatURL,\n        tags,\n        largeImageURL,\n        previewURL,\n\n        likes,\n        views,\n        comments,\n        downloads,\n      } = arr;\n      return ` <li class=\"gallery-item blurred-img\" data-tilt> \n              <a class=\"gallery-link \" href=\"${largeImageURL}\">\n              <img  \n                class=\"gallery-image lazyload\"\n                data-src=\"${webformatURL}\"\n                src=\"${previewURL}\"\n                alt=\"${tags}\"\n              />\n            </a>\n              <ul class=\"property-list\">\n    <li class=\"list-property-item\"><strong>Likes</strong> <br> ${likes}</li>\n    <li class=\"list-property-item\"><strong>Views</strong> <br> ${views}</li>\n    <li class=\"list-property-item\"><strong>Comments</strong> <br> ${comments}</li>\n    <li class=\"list-property-item\"><strong>Downloads</strong> <br> ${downloads}</li>\n  </ul>\n          </li>`;\n    })\n    .join('');\n}\n\nexport function smoothOnLoad() {\n  let galleryImg = gallery.querySelector('.gallery-item');\n  let rect = galleryImg.getBoundingClientRect();\n\n  window.scrollBy({\n    top: rect.height * 2,\n    behavior: 'smooth',\n  });\n}\n","const errorMsg = {\n  message:\n    'Sorry, there are no images matching  your search query. Please, try again!',\n  messageSize: '16',\n  messageLineHeight: '24',\n  iconUrl: './img/error.svg',\n  backgroundColor: 'rgb(239, 64, 64)',\n  messageColor: 'rgb(255, 255, 255)',\n  titleColor: 'rgb(255, 255, 255)',\n  position: 'topRight',\n  close: 'rgb(255, 255, 255)',\n  maxWidth: '432px',\n};\n\nconst okMsg = {\n  // title: 'Ok',\n  iconUrl: './img/ok.svg',\n  backgroundColor: 'rgb(89, 161, 13)',\n  messageColor: 'rgb(255, 255, 255)',\n  titleColor: 'rgb(255, 255, 255)',\n  position: 'topRight',\n  close: 'rgb(255, 255, 255)',\n  messageSize: '16',\n  messageLineHeight: '24',\n};\n\nconst warningMsg = {\n  // title: 'Caution',\n  message: 'You forgot to enter a search query',\n  iconUrl: './img/warning.svg',\n  backgroundColor: 'rgb(255, 160, 0)',\n  messageColor: 'rgb(255, 255, 255)',\n  titleColor: 'rgb(255, 255, 255)',\n  position: 'topRight',\n  close: 'rgb(255, 255, 255)',\n  messageSize: '16',\n  messageLineHeight: '24',\n};\n\nexport { errorMsg, okMsg, warningMsg };\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getPhotos } from './js/pixabay-api';\nimport { renderPage, gallery, smoothOnLoad } from './js/render-functions';\nimport { errorMsg, okMsg, warningMsg } from './js/izi-toast-options';\n\nconst searchForm = document.querySelector('.js-search-form');\nconst input = searchForm.querySelector('.js-input');\nconst loader = document.querySelector('.js-loader');\nconst loadMoreBtn = document.querySelector('.js-load-more');\n\nlet searchQ;\nlet perPage = 15;\nlet page = 1;\nlet lastPage;\n\nsearchForm.addEventListener('submit', onFormSubmit);\nloadMoreBtn.addEventListener('click', onloadMoreClick);\n\ninput.addEventListener('focus', () => {\n  input.removeAttribute('placeholder');\n});\ninput.addEventListener('blur', () => {\n  input.setAttribute('placeholder', 'Search images...');\n});\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n  hideLoadMoreBtn();\n\n  gallery.innerHTML = '';\n  page = 1;\n  searchQ = e.currentTarget.elements['user-search-q'].value.trim();\n\n  if (!searchQ) return messageEmptyWarning();\n\n  try {\n    loaderShow();\n    const data = await getPhotos(searchQ, page, perPage);\n    if (data.hits.length === 0) return messageFinishedError();\n\n    messageFinishedOk(data.total);\n    renderPage(data.hits);\n\n    if (data.total < perPage) {\n      hideLoadMoreBtn();\n    } else {\n      showLoadMoreBtn();\n    }\n\n    e.target.reset();\n  } catch (error) {\n    console.log(error);\n  } finally {\n    loaderHide();\n  }\n}\n/*======= LoadMore =======*/\nasync function onloadMoreClick() {\n  page += 1;\n\n  try {\n    loaderShow();\n\n    const data = await getPhotos(searchQ, page, perPage);\n\n    renderPage(data.hits);\n    smoothOnLoad();\n\n    lastPage = Math.ceil(data.total / perPage);\n    if (lastPage === page) {\n      hideLoadMoreBtn();\n      messageOnLastPage(data.total);\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    loaderHide();\n  }\n}\n\nfunction showLoadMoreBtn() {\n  loadMoreBtn.classList.remove('is-hidden');\n}\nfunction hideLoadMoreBtn() {\n  loadMoreBtn.classList.add('is-hidden');\n}\n/*======= / LoadMore =======*/\n/*=========== Messages=========*/\n\nfunction messageEmptyWarning() {\n  iziToast.warning(warningMsg);\n}\n\nfunction messageFinishedError() {\n  iziToast.error(errorMsg);\n}\n\nfunction messageFinishedOk(total) {\n  okMsg.message = `We found ${total} photos`;\n  iziToast.success(okMsg);\n}\n\nfunction messageOnLastPage(total) {\n  okMsg.message = `It's all ${total} photos`;\n  iziToast.success(okMsg);\n}\n\n/*=========== /Messages=========*/\n\n/*=========== Loader Spinner=========*/\nfunction loaderShow() {\n  loader.classList.remove('is-hidden');\n}\nfunction loaderHide() {\n  loader.classList.add('is-hidden');\n}\n/*=========== /Loader Spinner=========*/\n"],"names":["axios","API_KEY","getPhotos","q","page","perPage","data","galleryList","SimpleLightbox","gallery","renderPage","arr","createMarkup","VanillaTilt","webformatURL","tags","largeImageURL","previewURL","likes","views","comments","downloads","smoothOnLoad","rect","errorMsg","okMsg","warningMsg","searchForm","input","loader","loadMoreBtn","searchQ","lastPage","onFormSubmit","onloadMoreClick","hideLoadMoreBtn","messageEmptyWarning","loaderShow","messageFinishedError","messageFinishedOk","showLoadMoreBtn","error","loaderHide","messageOnLastPage","iziToast","total"],"mappings":"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"}